# å¦‚ä½•è¿æ¥æ‰‹æœºæŸ¥çœ‹æ—¥å¿—

## ğŸ“± ç¬¬ä¸€æ­¥ï¼šå¯ç”¨å¼€å‘è€…é€‰é¡¹

1. **æ‰“å¼€è®¾ç½®**
2. **å…³äºæ‰‹æœº** â†’ ç‚¹å‡»"ç‰ˆæœ¬å·"7æ¬¡
3. **æç¤º"æ‚¨å·²å¤„äºå¼€å‘è€…æ¨¡å¼"**

## ğŸ”§ ç¬¬äºŒæ­¥ï¼šå¯ç”¨ USB è°ƒè¯•

1. **è®¾ç½®** â†’ **ç³»ç»Ÿå’Œæ›´æ–°** â†’ **å¼€å‘äººå‘˜é€‰é¡¹**
2. **æ‰“å¼€"å¼€å‘äººå‘˜é€‰é¡¹"æ€»å¼€å…³**
3. **æ‰“å¼€"USB è°ƒè¯•"**
4. **æ‰“å¼€"USB è°ƒè¯•ï¼ˆå®‰å…¨è®¾ç½®ï¼‰"**ï¼ˆåä¸ºç‰¹æœ‰ï¼Œå¦‚æœæœ‰çš„è¯ï¼‰

## ğŸ”Œ ç¬¬ä¸‰æ­¥ï¼šè¿æ¥ç”µè„‘

### æ–¹å¼ Aï¼šUSB æ•°æ®çº¿è¿æ¥

1. **ç”¨æ•°æ®çº¿è¿æ¥æ‰‹æœºå’Œç”µè„‘**
2. **æ‰‹æœºä¼šå¼¹å‡º"å…è®¸ USB è°ƒè¯•å—ï¼Ÿ"**
   - å‹¾é€‰"ä¸€å¾‹å…è®¸ä½¿ç”¨è¿™å°è®¡ç®—æœºè¿›è¡Œè°ƒè¯•"
   - ç‚¹å‡»"å…è®¸"

3. **éªŒè¯è¿æ¥**ï¼š
```bash
adb devices
```

åº”è¯¥çœ‹åˆ°ï¼š
```
List of devices attached
XXXXXX    device
```

### æ–¹å¼ Bï¼šæ— çº¿è°ƒè¯•ï¼ˆå¦‚æœç”µè„‘å’Œæ‰‹æœºåœ¨åŒä¸€ WiFiï¼‰

1. **æ‰‹æœºè®¾ç½®**ï¼šå¼€å‘äººå‘˜é€‰é¡¹ â†’ æ— çº¿è°ƒè¯• â†’ æ‰“å¼€
2. **ç”µè„‘è¿æ¥**ï¼š
```bash
adb tcpip 5555
adb connect æ‰‹æœºIP:5555
```

## ğŸ” ç¬¬å››æ­¥ï¼šæŸ¥çœ‹å®æ—¶æ—¥å¿—

### æ–¹æ³• 1ï¼šæŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
```bash
adb logcat
```

### æ–¹æ³• 2ï¼šåªçœ‹ Hiddify ç›¸å…³æ—¥å¿—ï¼ˆæ¨èï¼‰
```bash
adb logcat | grep -E "A/BoxService|A/CommandServer|A/EventHandler|Hiddify"
```

### æ–¹æ³• 3ï¼šåªçœ‹é”™è¯¯æ—¥å¿—
```bash
adb logcat *:E | grep -i hiddify
```

### æ–¹æ³• 4ï¼šè¿‡æ»¤å…³é”®ä¿¡æ¯
```bash
adb logcat | grep -E "permission|denied|socket|command.sock|working dir"
```

### æ–¹æ³• 5ï¼šä¿å­˜æ—¥å¿—åˆ°æ–‡ä»¶
```bash
adb logcat > ~/Desktop/hiddify_log.txt
```

## ğŸ“Š å…³é”®æ—¥å¿—å†…å®¹

### æ­£å¸¸å¯åŠ¨ä¼šçœ‹åˆ°ï¼š
```
A/BoxService: å¼€å§‹åˆå§‹åŒ–...
A/BoxService: base dir: /data/data/app.hiddify.com/files
A/BoxService: working dir: /data/data/app.hiddify.com/files/box_working
A/BoxService: working dir exists: true
A/BoxService: working dir canWrite: true
A/BoxService: Mobile.setup() å®Œæˆ
A/BoxService: âœ… CommandServer å¯åŠ¨æˆåŠŸ
A/BoxService: æœåŠ¡å¯åŠ¨å®Œæˆ
```

### å¦‚æœæœ‰æƒé™é”™è¯¯ä¼šçœ‹åˆ°ï¼š
```
A/BoxService: âŒ CommandServer å¯åŠ¨å¤±è´¥: permission denied
A/BoxService: è¿™æ˜¯æƒé™é”™è¯¯ï¼Œå·¥ä½œç›®å½•å¯èƒ½ä¸å¯å†™
A/BoxService: working dir: /data/data/...
A/BoxService: exists: true, canWrite: false
```

## ğŸ› ï¸ å¸¸è§é—®é¢˜

### é—®é¢˜ 1ï¼šç”µè„‘æ²¡æœ‰ adb
```bash
# macOS å®‰è£… adb
brew install android-platform-tools

# æˆ–è€…ä¸‹è½½ Android SDK Platform Tools
https://developer.android.com/studio/releases/platform-tools
```

### é—®é¢˜ 2ï¼šadb devices æ˜¾ç¤º unauthorized
- æ‰‹æœºä¸Šä¼šå¼¹å‡º"å…è®¸ USB è°ƒè¯•"å¯¹è¯æ¡†
- ç‚¹å‡»"å…è®¸"

### é—®é¢˜ 3ï¼šadb devices æ˜¾ç¤º offline
```bash
adb kill-server
adb start-server
adb devices
```

### é—®é¢˜ 4ï¼šåä¸ºæ‰‹æœºè¿æ¥é—®é¢˜
- ç¡®ä¿å®‰è£…äº†åä¸ºæ‰‹æœºåŠ©æ‰‹æˆ– HiSuite
- åœ¨"å¼€å‘äººå‘˜é€‰é¡¹"ä¸­æ‰“å¼€"ä»…å……ç”µæ¨¡å¼ä¸‹å…è®¸ ADB è°ƒè¯•"

## ğŸ“± æ“ä½œæµç¨‹

1. **è¿æ¥æ‰‹æœºåˆ°ç”µè„‘**
2. **æ‰“å¼€ç»ˆç«¯**ï¼Œè¿è¡Œï¼š
```bash
adb logcat -c  # æ¸…é™¤æ—§æ—¥å¿—
adb logcat | grep -E "A/BoxService|permission|socket"
```
3. **åœ¨æ‰‹æœºä¸Šæ‰“å¼€ Hiddify**
4. **ç‚¹å‡»è¿æ¥æŒ‰é’®**
5. **è§‚å¯Ÿç»ˆç«¯è¾“å‡ºçš„æ—¥å¿—**

## ğŸ¯ éœ€è¦å…³æ³¨çš„æ—¥å¿—

å¦‚æœçœ‹åˆ°ï¼š
- `permission denied` â†’ æƒé™é—®é¢˜
- `read-only file system` â†’ æ–‡ä»¶ç³»ç»Ÿé—®é¢˜
- `no such file or directory` â†’ è·¯å¾„é—®é¢˜
- `bind: address already in use` â†’ ç«¯å£å ç”¨
- `timeout` â†’ å¯åŠ¨è¶…æ—¶

æŠŠè¿™äº›æ—¥å¿—ä¿¡æ¯å‘ç»™æˆ‘ï¼Œæˆ‘å¯ä»¥ç²¾ç¡®å®šä½é—®é¢˜ï¼

## âš ï¸ åä¸ºæ‰‹æœºç‰¹åˆ«æç¤º

åä¸ºæ‰‹æœºéœ€è¦é¢å¤–æ­¥éª¤ï¼š
1. è®¾ç½® â†’ å®‰å…¨ â†’ æ›´å¤šå®‰å…¨è®¾ç½® â†’ å¤–éƒ¨æ¥æºåº”ç”¨æ£€æŸ¥ â†’ å…³é—­
2. è®¾ç½® â†’ åº”ç”¨ â†’ æƒé™ç®¡ç† â†’ Hiddify â†’ æˆäºˆæ‰€æœ‰æƒé™
3. è®¾ç½® â†’ ç”µæ±  â†’ åº”ç”¨å¯åŠ¨ç®¡ç† â†’ Hiddify â†’ æ‰‹åŠ¨ç®¡ç† â†’ å…¨éƒ¨æ‰“å¼€

